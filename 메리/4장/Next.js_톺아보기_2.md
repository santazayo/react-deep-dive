#### Summary
- Next.js 의 Data Fetching 에 대해서 이해할 수 있어요.

#### Advantages
##### `getStaticPaths`
- `getStaticPaths` 는 접근 가능한 주소를 정의하는 함수입니다.
  - `getStaticPaths` 에서 정의한 주소를 기반으로 다른 주소로 진입했을 경우에는 `404` 를 반환합니다.
- 반환값 중 하나인 `fallback` 옵션은 미리 빌드해야 할 페이지가 너무 많은 경우에 사용 가능합니다.
  - `true`: 사용자가 미리 빌드하지 않은 페이지에 접근할 경우, 빌드되기 전까지는 정의해 놓은 `fallback` 컴포넌트를 보여 주고, 빌드가 완료된 이후에 해당 페이지를 보여주는 옵션
  - `blocking`: 별도의 로딩과 같은 처리를 하지 않고, 단순히 빌드가 완료될 때까지 사용자를 기다리게 하는 옵션으로 서버 사이드에서 렌더링할 때까지 대기한 다음, 렌더링이 완료되면 해당 페이지 제공

##### `getStaticProps` 
- `getStaticProps` 는 `getStaticPaths` 에서 정의한 페이지를 기준으로 해당 페이지로 요청이 왔을 때 제공할 `props` 를 반환하는 함수입니다.

위 두 함수를 사용하면 <b>빌드 시점에서 미리 데이터를 불러온 다음에 정적인 HTML 페이지를 만들 수 있습니다.</b>
이렇게 사용자가 접근할 수 있는 페이지를 모조리 빌드해 두고 배포하면 사용자는 굳이 페이지가 렌더링되는 것을 기다릴 필요 없이 이미
완성돼 있는 페이지를 받기만 하면 되므로 사용자는 굉장히 빠르게 해당 페이지를 확인할 수 있습니다.

#### `getServerSideProps`
- `getServerSideProps` 는 서버에서 실행되는 함수이며 해당 함수가 있다면 무조건 페이지 진입 전에 해당 함수를 실행합니다.
- 응답값에 따라 페이지의 루트 컴포넌트에 `props` 를 반환할 수도, 혹은 다른 페이지로 리다이렉트시킬 수도 있습니다.
- 해당 함수가 있다면 `Next.js` 는 <b>꼭 서버에서 실행해야 하는 페이지로 분류해, 빌드 시에도 서버용 자바스크립트 파일을 별도로 만듭니다.</b>
- `Next.js` 의 서버 사이드 렌더링은 `getServerSideProps`의 실행과 함께 이루어지며, 이 정보를 기반으로 페이지를 렌더링하는 과정 = 서버 사이드 렌더링

#### <script id="__NEXT_DATA__" type="application/json">
- 해당 스크립트에는 `getServerSideProps`의 정보인 `props`뿐만 아니라 현재 페이지 정보, `query` 등 `Next.js` 구동에 필요한 다양한 정보가 담겨 있습니다.

##### 서버 사이드 렌더링 작동 순서
1. 서버에서 `fetch` 등으로 렌더링에 필요한 정보를 가져옵니다.
2. 1번에서 가져온 정보를 기반으로 `HTML`을 완성합니다.
3. 2번의 정보를 클라이언트(브라우저)에 제공합니다.
4. 3번의 정보를 바탕으로 클라이언트에서 `hydrate` 작업을 합니다. 이 작업은 `DOM`에 리액트 라이프사이클과 이벤트 핸들러를 추가하는 작업입니다.
5. 4번 작업인 `hydrate`로 만든 리액트 컴포넌트 트리와 서버에서 만든 `HTML`이 다르다면 불일치 에러를 뱉습니다. (`suppressHydrationWarning`)
6. 5번 작업도 1번과 마찬가지로 `fetch` 등을 이용해 정보를 가져와야 합니다.

즉, 1번과 6번 사이에 `fetch` 시점에 따라 결과물의 불일치가 발생할 수 있으므로 1번에서 가져온 정보를 결과물인 `HTML`에 `script` 형태로 내려 줍니다.
